# 加密程序使用方法&原理说明（第五版）

![fread_logo_400](https://github.com/user-attachments/assets/40cf2196-db76-4ee4-bbd2-8433dc72b418)


## 使用方法：

### 加密：

1. 双击`encryption_app.exe`即可启动程序，界面如下：

![image-20241111115030105](https://github.com/user-attachments/assets/62031f90-4fe2-4d4e-8cf5-5007bb50afdd)


2. 点击`加密文件`出现文件选择框，选择需要加密的文件
3. 加密后的文件保存在与原始文件相同的目录下，后缀名是`.encrypted`。譬如：原始文件是`abc.pdf`，那么加密后的文件就在其相同目录下，文件名：`abc.pdf.encrypted`



### 解密：

1. 同样双击`encryption_app.exe`启动程序
2. 点击`解密文件`出现文件选择框，选择加密过的文件，譬如：`abc.pdf.encryption`
3. 解密完成后自动恢复原始文件名，并且保存在与加密文件相同的目录下



## 原理说明-加密部分：



首先使用AES加密原始文件。

- 生成随机的AES密钥（symmetric_key = os.urandom(32)）
- 生成随机的初始化向量IV（iv = os.urandom(16)）
- 使用AES-CFB模式加密原始文件内容



再使用RSA加密AES产生的KEY

- 使用RSA公钥加密AES密钥（只加密AES密钥，不是文件内容）



最终的加密文件结构：

```
[IV(16字节)] + [RSA加密后的AES密钥(256字节)] + [AES加密后的文件内容]
```



设计原因：

1. AES是对称加密，速度快，适合加密大文件
2. RSA是非对称加密，速度慢但安全性高，只用来加密较小的AES密钥
3. 这种混合方案既保证了加密速度，又保证了安全性



## 原理说明-解密部分：



解密时则是相反的过程：

1. 先用RSA私钥解密出AES密钥
2. 再用解密出的AES密钥去解密文件内容





## Q&A：

Q：`为什么不直接使用2048位RSA，而要使用AES+RSA混合加密的方式？`

A：由于RSA是分块加解密，在加解密体积较大的文件时（譬如几M~几百M），速度会很慢，受机器性能影响较大。因此使用AES对称加密的方式先对文件内容进行一次加密，再用RSA 2048对AES加密后产生的随机KEY进行二次加密。由于RSA 2048的安全性很高，使得破解者无法获得正确的AES KEY，而没有正确的KEY也就无法解密AES，从而无法获得原始文件内容。





Q：`打包编译后的exe可执行程序如果被他人非法获取到，是否可以通过逆向工程获取软件的加密算法？`

A：首先，世界上不存在完全不可破解的程序，所谓各种程序保护手段都只是延长破解者所需要的时间、增加破解难度而已。encryption_app.exe使用了一定程度的代码保护手段，包括但不限于：字节码加密、密钥隐藏等。因此破解者需要花费相当的精力和时间才能正确反编译程序。
